<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Aviator Assistant ğŸ„</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  font-family:Arial,sans-serif;
  background:radial-gradient(circle at top,#0b0f14,#000);
  color:#eaeaea;
  overflow-x:hidden;
}
.card{
  max-width:420px;
  margin:20px auto;
  padding:20px;
  border-radius:18px;
  background:rgba(18,18,18,.95);
  box-shadow:0 0 25px rgba(0,255,153,.3);
}
.tabs{display:flex;gap:8px;margin-bottom:15px}
.tab{
  flex:1;padding:10px;text-align:center;
  border-radius:10px;background:#111;cursor:pointer
}
.tab.active{
  background:linear-gradient(45deg,#00ff99,#ff3333);
  color:#000;font-weight:bold
}
button,input,select{
  width:100%;padding:14px;margin-top:10px;
  border-radius:12px;border:none
}
button{
  background:linear-gradient(45deg,#00ff99,#ff3333);
  font-weight:bold;cursor:pointer
}
button:disabled{opacity:.4;cursor:not-allowed}
input,select{
  background:#000;color:#fff;border:1px solid #00ff99
}
.signal{
  margin-top:15px;padding:15px;
  border:2px solid #00ff99;border-radius:12px;
  text-align:center;color:#00ff99;white-space:pre-line
}
.small{font-size:12px;opacity:.8;text-align:center;margin-top:8px}
.hidden{display:none}

/* Verified badge */
#verifyBadge{
  display:none;
  color:#00ff99;
  font-weight:bold;
  text-align:center;
  margin-top:6px;
}

/* Success animation */
@keyframes verifyPulse{
  0%{transform:scale(1);box-shadow:0 0 0 rgba(0,255,153,0)}
  50%{transform:scale(1.05);box-shadow:0 0 30px rgba(0,255,153,.9)}
  100%{transform:scale(1);box-shadow:0 0 0 rgba(0,255,153,0)}
}
.verify-animate{animation:verifyPulse 1s ease-in-out 2}

/* Snow */
.snow{
  position:fixed;
  top:-20px;
  pointer-events:none;
  z-index:9999;
}
</style>
</head>

<body>

<div class="card" id="mainCard">
<h3 style="text-align:center">âœˆ Aviator Assistant ğŸ„</h3>
<div id="verifyBadge">Verified âœ…</div>

<div class="tabs">
  <div class="tab active" onclick="showTab('free')">FREE</div>
  <div class="tab" onclick="showTab('vip')">VIP</div>
  <div class="tab" onclick="showTab('verify')">VERIFY</div>
</div>

<!-- FREE -->
<div id="free">
  <button id="freeBtn" onclick="generateSignal('Free')" disabled>
    ğŸ Generate Free Signal
  </button>
  <div class="signal" id="freeSignal">ğŸ”’ Verify Telegram to unlock</div>
</div>

<!-- VIP -->
<div id="vip" class="hidden">
  <input id="vipKey" placeholder="Enter VIP Activation Key">
  <button onclick="activateVIP()">Activate VIP</button>
  <button id="vipBtn" onclick="generateSignal('VIP')" disabled>
    ğŸš€ Generate VIP Signal
  </button>
  <div class="signal" id="vipSignal">ğŸ”’ Verify Telegram to unlock</div>
</div>

<!-- VERIFY -->
<div id="verify" class="hidden">

  <div class="signal">
    ğŸ” <b>Telegram Verification Required</b><br><br>
    To unlock signals, verify using Telegram.<br>
    Click the button below and approve login.
  </div>

  <!-- Telegram Login Widget (VISIBLE ON LOAD) -->
  <div style="text-align:center;margin-top:10px;">
    <script src="https://telegram.org/js/telegram-widget.js?22"
      data-telegram-login="THversion129_bot"
      data-size="large"
      data-userpic="true"
      data-request-access="write"
      data-onauth="onTelegramAuth">
    </script>
  </div>

  <input id="tgUser" placeholder="Telegram Username" disabled>
  <div class="signal" id="profileStatus">Not verified</div>

</div>

<div class="small">Strategy assistant â€¢ No guaranteed wins</div>
</div>

<!-- Firebase (COMPAT) -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script>
/* FIREBASE */
firebase.initializeApp({
  apiKey: "AIzaSyAOLShtHLvbOEJXy60SvrujL32k747sjBo",
  authDomain: "aviator-bot-aec45.firebaseapp.com",
  projectId: "aviator-bot-aec45"
});
const db = firebase.firestore();

/* Tabs */
function showTab(t){
  document.querySelectorAll(".tab").forEach(x=>x.classList.remove("active"));
  document.querySelectorAll("#free,#vip,#verify").forEach(x=>x.classList.add("hidden"));
  document.querySelector(`[onclick*='${t}']`).classList.add("active");
  document.getElementById(t).classList.remove("hidden");
}

/* Verification helpers */
function isVerified(){
  const p = JSON.parse(localStorage.getItem("profile")||"null");
  return p && p.verified === true;
}

function updateVerificationUI(){
  const v = isVerified();
  freeBtn.disabled = !v;
  vipBtn.disabled  = !v;
  verifyBadge.style.display = v ? "block" : "none";
}

/* Telegram verification callback */
function onTelegramAuth(user){
  const profile = {
    tg: "@"+user.username,
    tgId: user.id,
    verified: true
  };
  localStorage.setItem("profile", JSON.stringify(profile));
  tgUser.value = profile.tg;
  profileStatus.innerText = "âœ… Telegram verified";

  db.collection("users").doc(profile.tg).set({
    telegram: profile.tg,
    telegramId: user.id,
    verified: true
  },{merge:true});

  updateVerificationUI();

  // success animation
  mainCard.classList.add("verify-animate");
  setTimeout(()=>mainCard.classList.remove("verify-animate"),2000);
}

/* VIP */
function activateVIP(){
  if(!isVerified()){
    alert("Verify Telegram first");
    showTab("verify");
    return;
  }
  vipSignal.innerText = "âœ… VIP Activated";
  vipBtn.disabled = false;
}

/* Signal */
function generateSignal(type){
  if(!isVerified()){
    alert("Verify Telegram first");
    showTab("verify");
    return;
  }
  const sig=(Math.random()*(2-1.23)+1.23).toFixed(2);
  const t=new Date(Date.now()+300000).toTimeString().slice(0,8);
  const txt=`ğŸ•œ TIME: ${t}\nğŸš€ SIGNAL: ${sig}x`;

  if(type==="VIP") vipSignal.innerText=txt;
  else freeSignal.innerText=txt;
}

/* Snow */
setInterval(()=>{
  const s=document.createElement("div");
  s.className="snow";
  s.innerText="â„";
  s.style.left=Math.random()*innerWidth+"px";
  s.style.fontSize=(12+Math.random()*18)+"px";
  document.body.appendChild(s);
  s.animate([{top:"-20px"},{top:"110vh"}],{duration:7000});
  setTimeout(()=>s.remove(),8000);
},300);

/* Init */
updateVerificationUI();
</script>

</body>
</html>
